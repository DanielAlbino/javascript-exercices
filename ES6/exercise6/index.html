<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>
      Perform stable sorting of an array, preserving the initial indexes of
      items when their values are the same
    </title>
  </head>

  <body>
    <script>
      const stableSort = (arr, compare) =>
        arr
          .map((item, index) => ({ item, index }))
          .sort((a, b) => compare(a.item, b.item) || a.index - b.index)
          .map(({ item }) => item);

      const arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
      console.log(stableSort(arr, () => 0));
    </script>
  </body>
</html>
